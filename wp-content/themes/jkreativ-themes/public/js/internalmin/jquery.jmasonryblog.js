!function(t){"use strict";t.fn.jmasonryblog=function(e){return e=t.extend({loadAnimation:"seqfade",adminurl:"",pagingajax:!0},e),t(this).each(function(){var a=t(this),i=t(this).find(".isotopewrapper"),o=t(".blogfilter"),n=t(".bloginputfilter form"),l=t(".blogloader"),r=function(){var e=t(".jviewport").width();return 640>e?1:1100>e?2:1500>e?3:1700>e?4:5},s=function(){var e=(t(a).css("padding-left").replace("px",""),r()),o=t(a).width(),n=Math.floor(o/e);t(".article-masonry-container",i).width(n)},c=function(){var e=t(".filterfloatbutton"),a=t(".filterfloat");t(document).mouseup(function(i){t(i.target).parents(".filterfloatbutton").length>0||e.is(i.target)?t(a).hasClass("active")?t(a).removeClass("active"):t(a).addClass("active"):t(a).removeClass("active")})},u=function(){var e=t(".blogfilterbutton"),a=t(".blogfilter");t(document).mouseup(function(i){t(i.target).parents(".blogfilterbutton").length>0||e.is(i.target)?t(a).hasClass("active")?t(a).removeClass("active"):t(a).addClass("active"):t(a).removeClass("active")})},d=function(){c(),u()},p=function(){t(l).fadeIn(),t.ajax({url:e.adminurl,type:"post",dataType:"html",data:t(n).serialize(),success:function(e){t(i).isotope("layout"),setTimeout(function(){t(i).isotope("destroy"),t(".isotopewrapper .article-masonry-container",e).each(function(e){t(i).append(this)}),t(".blogpagingwrapper").html(t(".blogpagingwrapper",e)),v(t(".pagedot").length)},500)}})},f=function(a){var l=t(a.currentTarget),r=t(l).parent();t("li",r).removeClass("active"),t(l).addClass("active"),"sort"===t(l).data("type")?t("[name='sort']",n).val(t(l).data("sortby")):t("[name='category']",n).val(t(l).data("filter")),t("[name='paged']",n).val(1);var s="",c=t(".blogsortul").data("title"),u=t(".blogfilterul").data("title"),d=t(".blogsortul li.active"),f=t(".blogfilterul li.active");t(d).length>0&&(s=c+" "+t(d).text()),t(f).length>0&&(s+=t(d).length>0?" & "+u+" "+t(f).text():u+" "+t(f).text()),t(".blogfilterbutton").text(s),t(".filterfloatbutton span").text(s);var g=t(o).width();t(".blogfilterlist").css({"min-width":g}),t(".blogpagingwrapper").animate({opacity:0},"slow"),t.animate_hide(e.loadAnimation,i,t(i).find(".article-masonry-container"),function(){p()})},g=function(a){a.preventDefault();var o=t(a.currentTarget),l=t(o).data("page");t("[name='paged']",n).val(l),t(".pagetext .curpage").text(l),t.animate_hide(e.loadAnimation,i,t(i).find(".article-masonry-container"),function(){t(".blogpagingwrapper").animate({opacity:0},"slow"),p()})},m=function(){t(".article-image-slider").length&&(t(".article-image-slider").fotorama({allowfullscreen:!1,arrows:!1,width:"100%",maxWidth:"100%",aspectRatio:1}),t(".article-image-slider").on("fotorama:fullscreenexit",function(){s(),t(i).isotope("layout")})),t("[data-type='youtube']").length&&t("[data-type='youtube']").each(function(){t.type_video_youtube(t(this),!1,!1)}),t("[data-type='vimeo']").length&&t("[data-type='vimeo']").each(function(){t.type_video_vimeo(t(this),!1,!1)}),t("[data-type='soundcloud']").length&&t("[data-type='soundcloud']").each(function(){t.type_soundcloud(t(this))}),t("[data-type='html5video']").length&&t("[data-type='html5video']").each(function(){t.type_video_html5(t(this),!1,{enableAutosize:!0,videoWidth:"100%",videoHeight:"100%",features:["playpause","progress","current","duration","tracks","volume","fullscreen"]},".video-container")})},h=function(a){t(i).isotope({itemSelector:".article-masonry-container",masonry:{columnWidth:1}}),setTimeout(function(){t(l).fadeOut(),t.animate_load(e.loadAnimation,i,t(i).find(".article-masonry-container"),function(){t(i).isotope("layout")})},1e3),a&&t(".blogpagingwrapper").animate({opacity:1}).removeClass("hideme")},v=function(e){s(),m(),t(i).imagesLoaded().done(function(){h(e)}).fail(function(){h(e)})};t(window).bind("resize",function(t){s()}),d(),t(".blogfilterlist li, .filterfloatlist li").bind("click",f),e.pagingajax===!0&&t(".blogpagingwrapper").on("click",".pagedot a",g),v(!0)})}}(jQuery);